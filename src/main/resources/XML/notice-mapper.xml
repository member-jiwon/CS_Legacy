<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Notice">
	<!-- 공지사항 목록 조회 -->
	<select id="getAllNotices"
		resultType="com.kedu.notice.NoticeDTO">
		SELECT * FROM notice
		ORDER BY created_at DESC
	</select>

	<!-- 공지사항 상세 조회 -->
	<select id="selectNoticeById" parameterType="int"
		resultType="com.kedu.notice.NoticeDTO">
		SELECT notice_seq, view_count, title, content, company_code, created_at
		FROM notice
		WHERE notice_seq = #{id}
	</select>

	<!-- 공지사항 삽입 -->
	<insert id="insertNotice"
		parameterType="com.kedu.notice.NoticeDTO" useGeneratedKeys="true"
		keyProperty="notice_seq">
		INSERT INTO notice (title, content, company_code, created_at)
		VALUES (#{title}, #{content}, #{company_code}, SYSDATE)
	</insert>

	<!-- 공지사항 수정 -->
	<update id="updateNotice"
		parameterType="com.kedu.notice.NoticeDTO">
		UPDATE notice
		SET title = #{title}, content = #{content}, company_code =
		#{company_code}
		WHERE notice_seq = #{notice_seq}
	</update>

	<!-- 공지사항 삭제 -->
	<delete id="deleteNotice" parameterType="int">
		DELETE FROM notice WHERE notice_seq = #{id}
	</delete>
</mapper>
